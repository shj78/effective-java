
# Effective Java 

Day 3



## ì•„ì´í…œ 1 ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ë¼
<img width="807" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-04-14 á„‹á…©á„’á…® 12 27 43" src="https://github.com/devyoon91/man/assets/82854752/429158f0-0103-4a24-90a5-64a82f2e5027"> 
- https://1kevinson.com/use-static-factory-method-instead-of-constructors/
 

### ì¥ì 
1. ì´ë¦„ì´ ìƒê¸´ë‹¤ ("ì–˜ ë„ˆ ì´ë¦¬ì™€ë´, ê·¸ ìˆì–ì•„ ë„ˆ ì´ë¦„ì´ ë­ì˜€ë”ë¼?" í•  í•„ìš” ì—†ë‹¤) 
2. í˜¸ì¶œ í•„ìš”í•  ë•Œë§ˆë‹¤ ìƒì„±í•˜ë˜ ì¸ìŠ¤í„´ìŠ¤ í•„ìš”ì—†ë‹¤
3. ë°˜í™˜íƒ€ì…ì´ ìê¸°ì˜ í•˜ìœ„ í´ë˜ìŠ¤ì—¬ë„ ëœë‹¤
 - ìƒì„±ì > í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë§Œ ë°˜í™˜
 - ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œ > í˜¸í™˜ê°€ëŠ¥í•œ ë‹¤ë¥¸ íƒ€ì…ë“¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜

```java
//â†’ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ì˜ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤
//1.  í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¡œë¶€í„° ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ì˜ í”„ë ˆì„ ì›ì„ ì‚¬ìš©í•˜ë„ë¡ ê°•ì œí•œë‹¤
//2.  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ êµ¬ì²´ì ì¸ íƒ€ì…ì„ ìˆ¨ê¸¸ ìˆ˜ ìˆë‹¤
//> ì¸í„°í˜ì´ìŠ¤ì— ìŠ¤íƒœí‹± ë©”ì†Œë“œë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ ì´ì œëŠ” í´ë˜ìŠ¤ë¥¼ ë§ì´ ë§Œë“¤ì§€ ì•Šì•„ë„ ëœë‹¤
//cf) Java8 ì´í›„ë¶€í„° ì¸í„°í˜ì´ìŠ¤ì— staticí•œ ë©”ì„œë“œ ì„ ì–¸í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŒ

public interface HelloService {
    String hello();
    static String hi() {
        prepareMessage();
        return "hi";
    }
    static private void prepareMessage() {
    }
    static String hi1() {
        prepareMessage();
        return "hi";
    }
    static String hi2() {
        prepareMessage();
        return "hi";
    }
    default String bye() {
        return "bye";
    }
}

public class HelloServiceFactory {

    public static HelloService of(String lang){
        if(lang.equals("ko")){
            return new KoreanHelloService();
        }else{
            return new EnglishHelloService();
        }
    }

    public static void main(String[] args) {
        HelloService ko = HelloServiceFactory.of("ko"); 
    }

}
```
4. ë§¤ê°œë³€ìˆ˜ë¥¼ ë‹¤ë¥´ê²Œ í•´ì„œ ê°ì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤
 - ì›ë˜ ìƒì„±ìë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ê°™ì€ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ê³¼ ê°¯ìˆ˜ì— ë”°ë¼ì„œ ì œí•œë˜ì—ˆì§€ë§Œ ê·¸ë ‡ì§€ ì•Šë‹¤
5. ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œ ì‘ì„± ì‹œì ì— ë°˜í™˜í•  ê°ì²´ì˜ í´ë˜ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ë„ ëœë‹¤
```java
public interface HelloService {
    String hello();
}
public class HelloServiceFactory {
    public static void main(String[] args) {
        //Javaì—ì„œ ì œê³µí•˜ëŠ” ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ ServiceLoader(Iterableì„ êµ¬í˜„í•œë‹¤)
        ServiceLoader<HelloService> loader = ServiceLoader.load(HelloService.class);
        Optional<HelloService> helloServiceOptional = loader.findFirst();(optionalğŸ)
        helloServiceOptional.ifPresent(h -> {
            System.out.println(h.hello());
        });

        HelloService helloService = new ChineseHelloService();
        System.out.println(helloService.hello());//Ni Hao
    }
}
//> êµ¬í˜„ì²´ê°€ ì—†ëŠ” ì¸í„°í˜ì´ìŠ¤ë§Œ ì¡´ì¬í•˜ëŠ”ë° Ni Haoê°€ ì¶œë ¥ë˜ëŠ” ìƒí™©ì„ ë§í•˜ê³  ìˆëŠ” ê²ƒ
// 1. ChineseHelloServiceê°€ ìˆëŠ” í”„ë¡œì íŠ¸ ë‚´ src/resource/META-INF/servicesì— í•´ë‹¹ HelloServiceë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ ê²½ë¡œ ì´ë¦„ì˜ íŒŒì¼ ìƒì„±
// 2. ChineseHelloServiceì˜ ê²½ë¡œë¥¼ ì…ë ¥í•´ì£¼ë©´ ìë¥´ë¡œ íŒ¨í‚¤ì§•í•  ë•Œ META-INFì— ìˆëŠ” ì •ë³´ë¥¼ ìë¥´ íŒŒì¼ ì•ˆì— ë“¤ì–´ê°€ê²Œ ë˜ëŠ” ê²ƒì´ê³  HelloServiceê°€ ìˆëŠ” í”„ë¡œì íŠ¸ ë‚´ pom.xml dependencyë¡œ ë„£ì–´ë‘ê¸° ë–„ë¬¸ì— ì°¸ì¡°í•  ìˆ˜ ìˆê²Œ ëœë‹¤.
//? ê·¸ëŸ¬ë©´ ì™œ ì´ë ‡ê²Œ í•˜ëŠëƒ? ì¸ìŠ¤í„´ìŠ¤ë„ ë§Œë“¤ ìˆ˜ ìˆì§€ ì•ŠëŠëƒ?
//> ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œ ChineseHelloServiceëŠ” í•´ë‹¹ í´ë˜ìŠ¤ê°€ importë¥¼ í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ì˜ì¡´ì„±ì´ ìƒê¸´ë‹¤
//> ì½”ë“œ ìƒì—ì„œ ì–´ë–¤ êµ¬í˜„ì²´ê°€ ì˜¬ ì§€ ëª¨ë¥´ëŠ” ìƒí™©ê³¼ ëª…í™•í•˜ê²Œ ì–´ë–¤ êµ¬í˜„ì²´ê°€ ì˜¬ ì§€ ì•„ëŠ” ê²ƒì€ í° ì°¨ì´ê°€ ìˆë‹¤.
//> ì–´ë–¤ êµ¬í˜„ì²´ê°€ ì˜¬ ì§€ ëª¨ë¥´ì§€ë§Œ ë‚˜ëŠ” ê·¸ êµ¬í˜„ì²´ê°€ ë”°ë¥´ê³  ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ì½”ë”©ë§Œ í•˜ë©´ ë¼
//> ex) JDBC Driver : ìš°ë¦¬ëŠ” ì–´ë–¤ DBë¥¼ ì“¸ ì§€ ëª¨ë¥¸ë‹¤. MSSQL, ORACLEì—ì„œ ë™ì‘í•˜ëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•  ë•Œ Driverë§Œ ìˆë‹¤ë©´ ìœ ì—°í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.(í•˜ì§€ë§Œ JDBC DriverëŠ” ì„œë¹„ìŠ¤ ë¡œë”ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ì„œë¹„ìŠ¤ ë¡œë”ê°€ ë‚˜ì˜¤ê¸°ì „ì— ë‚˜ì™”ê¸° ë•Œë¬¸ì—...)
```
### ë‹¨ì 
1. ìƒì†ì´ ë¶ˆê°€í•˜ë‹¤
- ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë§Œì„ ì“°ê²Œ í•œë‹¤ëŠ” ê²ƒì€ ìƒì„±ìë¥¼ privateë¡œ ë§Œë“ ë‹¤ëŠ” ê²ƒ ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìƒì†ì„ í—ˆìš©í•˜ì§€ ì•Šê²Œ ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤
- í•˜ì§€ë§Œ ìš°íšŒí•˜ëŠ” ë°©ë²•ìœ¼ë¡œ delegationí•´ì„œ ê°€ì§€ê³  ìˆë‹¤ë©´ ìƒì†í•˜ì§€ ì•Šì•„ë„ ìƒì†í•˜ë ¤ë˜ í´ë˜ìŠ¤ì˜ ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.(ğŸ)
2. ì •í•´ì§„ ì´ë¦„ìœ¼ë¡œ ì“°ì§€ ì•Šìœ¼ë©´ í”„ë¡œê·¸ë˜ë¨¸ ì°¾ê¸° ì–´ë µë‹¤
- of, newInstance, get-í´ë˜ìŠ¤ëª… ë“±... ì˜ ì •í•´ì§„ ì´ë¦„ ë˜ëŠ” ë¬¸ì„œí™”(ì£¼ì„)ë¡œ í•´ê²°í•˜ì
* í”Œë¼ì´ì›¨ì´íŠ¸ íŒ¨í„´(ğŸ)

